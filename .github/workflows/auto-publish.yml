
  name: AI Agent Daily News Publisher

  on:
    schedule:
      - cron: '0 0 * * *'
      - cron: '0 6 * * *'
      - cron: '0 12 * * *'
    workflow_dispatch:
      inputs:
        mode:
          description: '发布模式'
          required: true
          default: 'daily'
          type: choice
          options:
            - daily
            - batch

  jobs:
    publish:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - uses: actions/setup-python@v5
          with:
            python-version: '3.11'
            cache: 'pip'
        - run: pip install -r requirements.txt
        - name: Publish
          env:
            WP_SITE_URL: ${{ secrets.WP_SITE_URL }}
            WP_USERNAME: ${{ secrets.WP_USERNAME }}
            WP_APP_PASSWORD: ${{ secrets.WP_APP_PASSWORD }}
          run: python auto_publish.py --mode daily --hours 12 --items 10
